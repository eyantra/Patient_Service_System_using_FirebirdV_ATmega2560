<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>PSS: pss::server::RequestHandler Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="namespacepss.html">pss</a>      </li>
      <li><a class="el" href="namespacepss_1_1server.html">server</a>      </li>
      <li><a class="el" href="classpss_1_1server_1_1_request_handler.html">pss::server::RequestHandler</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pac-attribs">Package Attributes</a> &#124;
<a href="#pac-static-attribs">Static Package Attributes</a>  </div>
  <div class="headertitle">
<h1>pss::server::RequestHandler Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="pss::server::RequestHandler" -->
<p><a href="classpss_1_1server_1_1_request_handler-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpss_1_1server_1_1_request_handler.html#aa13de69edeccb52eccd519130c265edf">RequestHandler</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpss_1_1server_1_1_request_handler.html#ae89600746980d54d6cabec703ec4ecfa">execute_bot_Command</a> (char command)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpss_1_1server_1_1_request_handler.html#ad7c73c676d2752b6873c8fcdde18c410">bot_blocked</a> (int bot_id)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpss_1_1server_1_1_request_handler.html#a1cd98f69ffae02aa520b677a94596c5a">buzzer_off</a> (int bot_id)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpss_1_1server_1_1_request_handler.html#a0624be87663ef32d5af3d2f6a7dc7563">assign_if_request_available</a> (int bot_id)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpss_1_1server_1_1_request_handler.html#a33d0fc7f34a635a08c4aa47deb1545c9">assign_bot_req</a> (int bot_id, int req_id)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpss_1_1server_1_1_request_handler.html#adf815ac9584a33973083f3e8f0d19ef6">request_completed</a> (int bot_id)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpss_1_1server_1_1_request_handler.html#af4c3911b78dada413a5c8d94806f6273">get_new_request_id</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpss_1_1server_1_1_request_handler.html#af46d0d58d3d43924cafa08f70b227014">get_a_free_bot</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpss_1_1server_1_1_request_handler.html#ae972b09e592127017c52c82821e0b153">print_patient_command</a> (char comm)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpss_1_1server_1_1_request_handler.html#a2d46e09e4bebc773364781e1c7d720ef">execute_patient_request</a> (char comm)</td></tr>
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpss_1_1server_1_1_request_handler.html#af7bf4bb4e61cf3c106d28e14c11fecf1">main</a> (String args[])</td></tr>
<tr><td colspan="2"><h2><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static final Boolean&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpss_1_1server_1_1_request_handler.html#abdf410dc3c3edc89643391b3fa0f629f">DEBUG</a> = false</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpss_1_1server_1_1_request_handler.html#a1c3152d9dc91b3062fd51b18374c3278">no_bots</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classpss_1_1serialcomm_1_1_communication_a_p_i.html">CommunicationAPI</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpss_1_1server_1_1_request_handler.html#ad7e34b1b1759e9e799fab9a48c30153f">capi</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static final int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpss_1_1server_1_1_request_handler.html#a8b69a3f34dfd3db528cb99b07ccb8a7c">BLOCKED</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static final int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpss_1_1server_1_1_request_handler.html#ab1c8683a3d58de0bc0ec9fa06819356b">ACK</a> = 1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static final int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpss_1_1server_1_1_request_handler.html#a75a8f02cb564dcde4d1355f44a48e694">IN_PROGRESS</a> = 2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static final int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpss_1_1server_1_1_request_handler.html#a5a97751f60338a26841df60a27060083">WATER</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static final int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpss_1_1server_1_1_request_handler.html#a66f77f9d76e502d12cd60dbdc7c279a9">MEDICINE</a> = 1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpss_1_1server_1_1_request_handler.html#ae511907b430e90bff7367dacc7dc18c4">no_request</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpss_1_1server_1_1_request_handler.html#a7005388127c270c5f1c3af1417a01642">request_absent</a> = 127</td></tr>
<tr><td colspan="2"><h2><a name="pac-attribs"></a>
Package Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classpss_1_1server_1_1database_1_1_d_b_handler.html">DBHandler</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpss_1_1server_1_1_request_handler.html#a2f6817f7bb71368a74adf1c345cf2e3a">dbh</a></td></tr>
<tr><td colspan="2"><h2><a name="pac-static-attribs"></a>
Static Package Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static Map&lt; Integer, <a class="el" href="classpss_1_1server_1_1_bot.html">Bot</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpss_1_1server_1_1_request_handler.html#aca60a9f8513fa0869c7ee4a9f85376fa">botList</a> = new HashMap&lt;Integer, <a class="el" href="classpss_1_1server_1_1_bot.html">Bot</a>&gt;()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classpss_1_1server_1_1_graph.html">Graph</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpss_1_1server_1_1_request_handler.html#ac6219fef27c10e21cf8a2774d4480ebb">g</a> = new <a class="el" href="classpss_1_1server_1_1_graph.html">Graph</a>()</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>The main method of this class listens for the request from patients and bots and performs the neccesary book-keeping (Adding/Modifying database). Then, in case of patients request, it assigns them to a free bot if such a bot is available. When bot finished serving a patient, it returns to the server and statys there until it gets another request from the server. In case of bot's response, server computes the next action bot has to perform and send the appropriate message. </p>

<p>Definition at line <a class="el" href="_request_handler_8java_source.html#l00101">101</a> of file <a class="el" href="_request_handler_8java_source.html">RequestHandler.java</a>.</p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aa13de69edeccb52eccd519130c265edf"></a><!-- doxytag: member="pss::server::RequestHandler::RequestHandler" ref="aa13de69edeccb52eccd519130c265edf" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pss::server::RequestHandler::RequestHandler </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This constructor initializes database, opens the communication interface and call functions to add patients into the database and bots into local variables. </p>
<dl class="see"><dt><b>See also:</b></dt><dd>DBHandler </dd>
<dd>
CommunicationAPI </dd></dl>

<p>Definition at line <a class="el" href="_request_handler_8java_source.html#l00130">130</a> of file <a class="el" href="_request_handler_8java_source.html">RequestHandler.java</a>.</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a33d0fc7f34a635a08c4aa47deb1545c9"></a><!-- doxytag: member="pss::server::RequestHandler::assign_bot_req" ref="a33d0fc7f34a635a08c4aa47deb1545c9" args="(int bot_id, int req_id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pss::server::RequestHandler::assign_bot_req </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>bot_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>req_id</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Assign request to the bot <br/>
 Set the use_or_not bit of the bot to be true. <br/>
 Make the bot turn by 180 degree <br/>
 Set the use_or_not bit of the bot to be true <br/>
 Set the pid field of the bot to the id of the patient who made the request <br/>
 Add the request id,bot id tuple to the assignment table of the database and update the status of the request in the database to serving <br/>
 </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>bot_id</em>&nbsp;</td><td>bot which is free </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>req_id</em>&nbsp;</td><td>pending request </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_request_handler_8java_source.html#l00424">424</a> of file <a class="el" href="_request_handler_8java_source.html">RequestHandler.java</a>.</p>

</div>
</div>
<a class="anchor" id="a0624be87663ef32d5af3d2f6a7dc7563"></a><!-- doxytag: member="pss::server::RequestHandler::assign_if_request_available" ref="a0624be87663ef32d5af3d2f6a7dc7563" args="(int bot_id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pss::server::RequestHandler::assign_if_request_available </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>bot_id</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>When the bot is free, search if there is any pending request in the database. If more than one request are pending use FIFO and assign that request to the bot with id bot_id If no such request are pending then set the use_or_not flag of bot to be false </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>bot_id</em>&nbsp;</td><td>bot which is free </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_request_handler_8java_source.html#l00393">393</a> of file <a class="el" href="_request_handler_8java_source.html">RequestHandler.java</a>.</p>

</div>
</div>
<a class="anchor" id="ad7c73c676d2752b6873c8fcdde18c410"></a><!-- doxytag: member="pss::server::RequestHandler::bot_blocked" ref="ad7c73c676d2752b6873c8fcdde18c410" args="(int bot_id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pss::server::RequestHandler::bot_blocked </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>bot_id</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sends a command to the bot with id bot_id to start a buzzer </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>bot_id</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_request_handler_8java_source.html#l00373">373</a> of file <a class="el" href="_request_handler_8java_source.html">RequestHandler.java</a>.</p>

</div>
</div>
<a class="anchor" id="a1cd98f69ffae02aa520b677a94596c5a"></a><!-- doxytag: member="pss::server::RequestHandler::buzzer_off" ref="a1cd98f69ffae02aa520b677a94596c5a" args="(int bot_id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pss::server::RequestHandler::buzzer_off </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>bot_id</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sends a command to the bot with id bot_id to stop the buzzer </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>bot_id</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_request_handler_8java_source.html#l00385">385</a> of file <a class="el" href="_request_handler_8java_source.html">RequestHandler.java</a>.</p>

</div>
</div>
<a class="anchor" id="ae89600746980d54d6cabec703ec4ecfa"></a><!-- doxytag: member="pss::server::RequestHandler::execute_bot_Command" ref="ae89600746980d54d6cabec703ec4ecfa" args="(char command)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pss::server::RequestHandler::execute_bot_Command </td>
          <td>(</td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>command</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Command message has the bot id encoded in the first three bits and message in rest of the firve bits <br/>
 We have maintained the current position and the the patient it is searching.<br/>
 Based on the status message returned from the bot following actions are performed<br/>
 BLOCKED : send a command to bot to start a buzzer.<br/>
 ACK : Compute the next immediate hop to be taken by the bot and send the command for that. If, bot is at the destination then start return trip to the server<br/>
 IN_PROGRESS : Don't do anything<br/>
 If the bot has reached the server after serving the request, then assign it a new request if available else<br/>
 If it is not at the server then search for the action(LEFT,RIGHT,STRAIGHT) the bot should take.<br/>
 If the bot is at the destination then signal that the request is completed and start returning to the server<br/>
 If the action is right then ask the bot to turn right<br/>
 If the action is left then ask the bot to turn left<br/>
 If the action is straight, then ask the bot to go straight<br/>
 If the action is turn_back then ask to bot to turn back<br/>
 If the bot is in middle of executing the previous instruction then do nothing<br/>
 </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>command</em>&nbsp;</td><td>message from bot </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_request_handler_8java_source.html#l00283">283</a> of file <a class="el" href="_request_handler_8java_source.html">RequestHandler.java</a>.</p>

</div>
</div>
<a class="anchor" id="a2d46e09e4bebc773364781e1c7d720ef"></a><!-- doxytag: member="pss::server::RequestHandler::execute_patient_request" ref="a2d46e09e4bebc773364781e1c7d720ef" args="(char comm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pss::server::RequestHandler::execute_patient_request </td>
          <td>(</td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>comm</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function processes the request received from the patient in the form of a char <br/>
 Extracts the information about what item was requested for from the last 5 bits of comm. <br/>
 Obtains a new unique id for this particular request <br/>
 Adds a new entry to the request table containing request id, patient_id,item requested for and the status of the request as pending <br/>
 Also check if a bot is free. If so then the id of the free bot is returned and is assigned to this request <br/>
 Otherwise the function exits. <br/>
 </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>comm</em>&nbsp;</td><td>character encoding request from the patient </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_request_handler_8java_source.html#l00542">542</a> of file <a class="el" href="_request_handler_8java_source.html">RequestHandler.java</a>.</p>

</div>
</div>
<a class="anchor" id="af46d0d58d3d43924cafa08f70b227014"></a><!-- doxytag: member="pss::server::RequestHandler::get_a_free_bot" ref="af46d0d58d3d43924cafa08f70b227014" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pss::server::RequestHandler::get_a_free_bot </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Scans the BotList hashmap for an free bot. <br/>
 </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>If any free bot is present then return its ID <br/>
 If no such bot is present then return -1 </dd></dl>

<p>Definition at line <a class="el" href="_request_handler_8java_source.html#l00498">498</a> of file <a class="el" href="_request_handler_8java_source.html">RequestHandler.java</a>.</p>

</div>
</div>
<a class="anchor" id="af4c3911b78dada413a5c8d94806f6273"></a><!-- doxytag: member="pss::server::RequestHandler::get_new_request_id" ref="af4c3911b78dada413a5c8d94806f6273" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pss::server::RequestHandler::get_new_request_id </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function returns a unique number as request ID each time it is called </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>New Request ID </dd></dl>

<p>Definition at line <a class="el" href="_request_handler_8java_source.html#l00490">490</a> of file <a class="el" href="_request_handler_8java_source.html">RequestHandler.java</a>.</p>

</div>
</div>
<a class="anchor" id="af7bf4bb4e61cf3c106d28e14c11fecf1"></a><!-- doxytag: member="pss::server::RequestHandler::main" ref="af7bf4bb4e61cf3c106d28e14c11fecf1" args="(String args[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void pss::server::RequestHandler::main </td>
          <td>(</td>
          <td class="paramtype">String&nbsp;</td>
          <td class="paramname"> <em>args</em>[]</td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sends a polling message to the next bot. This message requests the bot to tell the server it's current status. This will keep running and will recieve commands from Communication API in the form of characters. It will decode the command in the following manner.First three bits denote the id of the sender. .If ID is either 0 or 1, its a bot else it is a patient In case of bot, the control is transfered to execute_bot_command otherwise the control is transfered to execute_patient_request </p>

<p>Definition at line <a class="el" href="_request_handler_8java_source.html#l00218">218</a> of file <a class="el" href="_request_handler_8java_source.html">RequestHandler.java</a>.</p>

</div>
</div>
<a class="anchor" id="ae972b09e592127017c52c82821e0b153"></a><!-- doxytag: member="pss::server::RequestHandler::print_patient_command" ref="ae972b09e592127017c52c82821e0b153" args="(char comm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pss::server::RequestHandler::print_patient_command </td>
          <td>(</td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>comm</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Prints ID of patient who issued the command for debugging purposes </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>comm</em>&nbsp;</td><td>Command issued by patient (8 bits) typecasted as a char </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_request_handler_8java_source.html#l00525">525</a> of file <a class="el" href="_request_handler_8java_source.html">RequestHandler.java</a>.</p>

</div>
</div>
<a class="anchor" id="adf815ac9584a33973083f3e8f0d19ef6"></a><!-- doxytag: member="pss::server::RequestHandler::request_completed" ref="adf815ac9584a33973083f3e8f0d19ef6" args="(int bot_id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pss::server::RequestHandler::request_completed </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>bot_id</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Request is finished <br/>
 Delete the request bot was serving from the assignment table <br/>
 Update its status in the request table to done. <br/>
 Set the destination of the bot to server <br/>
 </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>bot_id</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_request_handler_8java_source.html#l00454">454</a> of file <a class="el" href="_request_handler_8java_source.html">RequestHandler.java</a>.</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="ab1c8683a3d58de0bc0ec9fa06819356b"></a><!-- doxytag: member="pss::server::RequestHandler::ACK" ref="ab1c8683a3d58de0bc0ec9fa06819356b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">final int <a class="el" href="classpss_1_1server_1_1_request_handler.html#ab1c8683a3d58de0bc0ec9fa06819356b">pss::server::RequestHandler::ACK</a> = 1<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Flag for returning the status of the bot. Tells if the previous instruction assigned to the bot is complete. </p>

<p>Definition at line <a class="el" href="_request_handler_8java_source.html#l00260">260</a> of file <a class="el" href="_request_handler_8java_source.html">RequestHandler.java</a>.</p>

</div>
</div>
<a class="anchor" id="a8b69a3f34dfd3db528cb99b07ccb8a7c"></a><!-- doxytag: member="pss::server::RequestHandler::BLOCKED" ref="a8b69a3f34dfd3db528cb99b07ccb8a7c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">final int <a class="el" href="classpss_1_1server_1_1_request_handler.html#a8b69a3f34dfd3db528cb99b07ccb8a7c">pss::server::RequestHandler::BLOCKED</a> = 0<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Flag for returning the status of the bot. Tells if some external object is obstructing the path of bot </p>

<p>Definition at line <a class="el" href="_request_handler_8java_source.html#l00256">256</a> of file <a class="el" href="_request_handler_8java_source.html">RequestHandler.java</a>.</p>

</div>
</div>
<a class="anchor" id="aca60a9f8513fa0869c7ee4a9f85376fa"></a><!-- doxytag: member="pss::server::RequestHandler::botList" ref="aca60a9f8513fa0869c7ee4a9f85376fa" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Map&lt;Integer, <a class="el" href="classpss_1_1server_1_1_bot.html">Bot</a>&gt; <a class="el" href="classpss_1_1server_1_1_request_handler.html#aca60a9f8513fa0869c7ee4a9f85376fa">pss::server::RequestHandler::botList</a> = new HashMap&lt;Integer, <a class="el" href="classpss_1_1server_1_1_bot.html">Bot</a>&gt;()<code> [static, package]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>A map between bot id and <a class="el" href="classpss_1_1server_1_1_bot.html">Bot</a> object </p>

<p>Definition at line <a class="el" href="_request_handler_8java_source.html#l00112">112</a> of file <a class="el" href="_request_handler_8java_source.html">RequestHandler.java</a>.</p>

</div>
</div>
<a class="anchor" id="ad7e34b1b1759e9e799fab9a48c30153f"></a><!-- doxytag: member="pss::server::RequestHandler::capi" ref="ad7e34b1b1759e9e799fab9a48c30153f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classpss_1_1serialcomm_1_1_communication_a_p_i.html">CommunicationAPI</a> <a class="el" href="classpss_1_1server_1_1_request_handler.html#ad7e34b1b1759e9e799fab9a48c30153f">pss::server::RequestHandler::capi</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Xbee functions including for sending and reciving messages is implemented in this class </p>
<dl class="see"><dt><b>See also:</b></dt><dd>CommunicationAPI </dd></dl>

<p>Definition at line <a class="el" href="_request_handler_8java_source.html#l00122">122</a> of file <a class="el" href="_request_handler_8java_source.html">RequestHandler.java</a>.</p>

</div>
</div>
<a class="anchor" id="a2f6817f7bb71368a74adf1c345cf2e3a"></a><!-- doxytag: member="pss::server::RequestHandler::dbh" ref="a2f6817f7bb71368a74adf1c345cf2e3a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classpss_1_1server_1_1database_1_1_d_b_handler.html">DBHandler</a> <a class="el" href="classpss_1_1server_1_1_request_handler.html#a2f6817f7bb71368a74adf1c345cf2e3a">pss::server::RequestHandler::dbh</a><code> [package]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Database Handler as defined in DBHandler </p>
<dl class="see"><dt><b>See also:</b></dt><dd>DBHandler </dd></dl>

<p>Definition at line <a class="el" href="_request_handler_8java_source.html#l00108">108</a> of file <a class="el" href="_request_handler_8java_source.html">RequestHandler.java</a>.</p>

</div>
</div>
<a class="anchor" id="abdf410dc3c3edc89643391b3fa0f629f"></a><!-- doxytag: member="pss::server::RequestHandler::DEBUG" ref="abdf410dc3c3edc89643391b3fa0f629f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">final Boolean <a class="el" href="classpss_1_1server_1_1_request_handler.html#abdf410dc3c3edc89643391b3fa0f629f">pss::server::RequestHandler::DEBUG</a> = false<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_request_handler_8java_source.html#l00103">103</a> of file <a class="el" href="_request_handler_8java_source.html">RequestHandler.java</a>.</p>

</div>
</div>
<a class="anchor" id="ac6219fef27c10e21cf8a2774d4480ebb"></a><!-- doxytag: member="pss::server::RequestHandler::g" ref="ac6219fef27c10e21cf8a2774d4480ebb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classpss_1_1server_1_1_graph.html">Graph</a> <a class="el" href="classpss_1_1server_1_1_request_handler.html#ac6219fef27c10e21cf8a2774d4480ebb">pss::server::RequestHandler::g</a> = new <a class="el" href="classpss_1_1server_1_1_graph.html">Graph</a>()<code> [static, package]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Floor lay-out </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classpss_1_1server_1_1_graph.html">Graph</a> </dd></dl>

<p>Definition at line <a class="el" href="_request_handler_8java_source.html#l00117">117</a> of file <a class="el" href="_request_handler_8java_source.html">RequestHandler.java</a>.</p>

</div>
</div>
<a class="anchor" id="a75a8f02cb564dcde4d1355f44a48e694"></a><!-- doxytag: member="pss::server::RequestHandler::IN_PROGRESS" ref="a75a8f02cb564dcde4d1355f44a48e694" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">final int <a class="el" href="classpss_1_1server_1_1_request_handler.html#a75a8f02cb564dcde4d1355f44a48e694">pss::server::RequestHandler::IN_PROGRESS</a> = 2<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Flag for returning the status of the bot. Tells if the previous instruction is still being executed. </p>

<p>Definition at line <a class="el" href="_request_handler_8java_source.html#l00264">264</a> of file <a class="el" href="_request_handler_8java_source.html">RequestHandler.java</a>.</p>

</div>
</div>
<a class="anchor" id="a66f77f9d76e502d12cd60dbdc7c279a9"></a><!-- doxytag: member="pss::server::RequestHandler::MEDICINE" ref="a66f77f9d76e502d12cd60dbdc7c279a9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">final int <a class="el" href="classpss_1_1server_1_1_request_handler.html#a66f77f9d76e502d12cd60dbdc7c279a9">pss::server::RequestHandler::MEDICINE</a> = 1<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Integer representing request for medicine. </p>

<p>Definition at line <a class="el" href="_request_handler_8java_source.html#l00480">480</a> of file <a class="el" href="_request_handler_8java_source.html">RequestHandler.java</a>.</p>

</div>
</div>
<a class="anchor" id="a1c3152d9dc91b3062fd51b18374c3278"></a><!-- doxytag: member="pss::server::RequestHandler::no_bots" ref="a1c3152d9dc91b3062fd51b18374c3278" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classpss_1_1server_1_1_request_handler.html#a1c3152d9dc91b3062fd51b18374c3278">pss::server::RequestHandler::no_bots</a> = 0<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_request_handler_8java_source.html#l00104">104</a> of file <a class="el" href="_request_handler_8java_source.html">RequestHandler.java</a>.</p>

</div>
</div>
<a class="anchor" id="ae511907b430e90bff7367dacc7dc18c4"></a><!-- doxytag: member="pss::server::RequestHandler::no_request" ref="ae511907b430e90bff7367dacc7dc18c4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classpss_1_1server_1_1_request_handler.html#ae511907b430e90bff7367dacc7dc18c4">pss::server::RequestHandler::no_request</a> = 0<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Global counter to assign unique request ID's </p>

<p>Definition at line <a class="el" href="_request_handler_8java_source.html#l00484">484</a> of file <a class="el" href="_request_handler_8java_source.html">RequestHandler.java</a>.</p>

</div>
</div>
<a class="anchor" id="a7005388127c270c5f1c3af1417a01642"></a><!-- doxytag: member="pss::server::RequestHandler::request_absent" ref="a7005388127c270c5f1c3af1417a01642" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classpss_1_1server_1_1_request_handler.html#a7005388127c270c5f1c3af1417a01642">pss::server::RequestHandler::request_absent</a> = 127<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_request_handler_8java_source.html#l00531">531</a> of file <a class="el" href="_request_handler_8java_source.html">RequestHandler.java</a>.</p>

</div>
</div>
<a class="anchor" id="a5a97751f60338a26841df60a27060083"></a><!-- doxytag: member="pss::server::RequestHandler::WATER" ref="a5a97751f60338a26841df60a27060083" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">final int <a class="el" href="classpss_1_1server_1_1_request_handler.html#a5a97751f60338a26841df60a27060083">pss::server::RequestHandler::WATER</a> = 0<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Integer representing request for water. </p>

<p>Definition at line <a class="el" href="_request_handler_8java_source.html#l00476">476</a> of file <a class="el" href="_request_handler_8java_source.html">RequestHandler.java</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/SERVER_CODE/pss/server/<a class="el" href="_request_handler_8java_source.html">RequestHandler.java</a></li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Wed Apr 6 2011 22:09:34 for PSS by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
